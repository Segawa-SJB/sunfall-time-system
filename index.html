<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sunfall Standard Time & Calendar</title>
    <style>
        /* Styling for the display */
        body { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; font-family: Arial, sans-serif; }
        #date, #time { font-size: 2em; margin: 10px; color: #333; }
    </style>
</head>
<body>
    <div id="date"></div>
    <div id="time"></div>

    <script>
        // Function to determine if a year is a leap year
        function isLeapYear(year) {
            return (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0));
        }

        // Function to get the number of days in each month
        function getDaysInMonth(month, year) {
            const daysInMonths = [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            return daysInMonths[month];
        }

        // Function to get the current Sunfall date and time
        function getSunfallDateTime() {
            const now = new Date(); // Current local time
            let sunfallStart = new Date(now);
            sunfallStart.setHours(18, 0, 0, 0); // Set to 6:00 PM local time start for Sunfall day

            // Adjust to previous day’s Sunfall start if before 6:00 PM today
            if (now < sunfallStart) {
                sunfallStart.setDate(sunfallStart.getDate() - 1); // Go back to previous day’s 6:00 PM
            }

            // Calculate time units for Sunfall
            let deltaSeconds = Math.floor((now - sunfallStart) / 1000);
            const periods = Math.floor(deltaSeconds / 3600);  // Periods = hours
            deltaSeconds %= 3600;
            const shades = Math.floor(deltaSeconds / 60);     // Shades = minutes
            const breaths = deltaSeconds % 60;                // Breaths = seconds

            // Current Gregorian date details (matches Sunfall day if after 6:00 PM)
            const day = sunfallStart.getDate();
            const month = sunfallStart.getMonth(); // Months are 0-indexed in JavaScript (Jan = 0)
            const year = sunfallStart.getFullYear();
            const weekDay = sunfallStart.getDay(); // 0 = Sunday, 6 = Saturday

            // Return formatted Sunfall time and date information
            return {
                date: `${year}-${month + 1}-${day}`, // Convert month to 1-based for display
                weekDay: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"][weekDay],
                sunfallTime: `Period ${periods + 1} : Shade ${shades} : Breath ${breaths}`
            };
        }

        // Function to update both the Sunfall date and time display
        function updateSunfallDisplay() {
            const sunfall = getSunfallDateTime();
            document.getElementById('date').innerText = `Sunfall Date: ${sunfall.weekDay}, ${sunfall.date}`;
            document.getElementById('time').innerText = `Sunfall Time: ${sunfall.sunfallTime}`;
        }

        // Update the display every second to keep Sunfall time accurate
        setInterval(updateSunfallDisplay, 1000);
    </script>
</body>
</html>
